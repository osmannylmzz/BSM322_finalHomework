<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="finalHomework.Pages.WeatherPage"
             Title="Hava Durumu"
             BackgroundColor="#0F1115">

    <Grid RowDefinitions="Auto,Auto,*" Padding="12" RowSpacing="12">

        <!-- Åžehir ekleme -->
        <Frame Grid.Row="0"
               Padding="12"
               BackgroundColor="#161A22"
               BorderColor="#2A3242"
               CornerRadius="16"
               HasShadow="True">

            <Grid ColumnDefinitions="*,Auto" ColumnSpacing="10">
                <Entry x:Name="CityEntry"
                       Placeholder="ðŸ™ï¸ Åžehir adÄ± girin..."
                       PlaceholderColor="#A7B0C0"
                       TextColor="White"
                       BackgroundColor="#1D2430"
                       Grid.Column="0" />

                <Button Text="âž• Ekle"
                        Clicked="OnAddCityClicked"
                        Grid.Column="1"
                        BackgroundColor="#7C5CFC"
                        TextColor="White"
                        CornerRadius="12"
                        HeightRequest="44"
                        Padding="14,8"/>
            </Grid>
        </Frame>

        <!-- Åžehir seÃ§imi -->
        <Frame Grid.Row="1"
               Padding="12"
               BackgroundColor="#161A22"
               BorderColor="#2A3242"
               CornerRadius="16"
               HasShadow="True">

            <Grid ColumnDefinitions="*,Auto" ColumnSpacing="10">
                <Picker x:Name="CityPicker"
                        Title="ðŸ“ Åžehir SeÃ§in"
                        TitleColor="#A7B0C0"
                        TextColor="White"
                        SelectedIndexChanged="OnCityChanged"
                        BackgroundColor="#1D2430"
                        Grid.Column="0" />

                <Button x:Name="DeleteCityButton"
                        Text="ðŸ—‘ï¸"
                        Clicked="OnDeleteCityClicked"
                        WidthRequest="54"
                        HeightRequest="44"
                        Grid.Column="1"
                        BackgroundColor="Transparent"
                        TextColor="#FF6B6B"
                        BorderColor="#FF6B6B"
                        BorderWidth="1"
                        CornerRadius="12"/>
            </Grid>
        </Frame>

        <!-- Ä°Ã§erik -->
        <Grid Grid.Row="2">

            <ScrollView>
                <VerticalStackLayout x:Name="WeatherContent"
                                     Padding="0"
                                     Spacing="12"
                                     IsVisible="False">

                    <!-- Mevcut durum kartÄ± -->
                    <Frame Padding="16"
                           BackgroundColor="#7C5CFC"
                           CornerRadius="16"
                           BorderColor="Transparent"
                           HasShadow="True">

                        <VerticalStackLayout Spacing="8">
                            <Label x:Name="CityNameLabel"
                                   FontSize="22"
                                   FontAttributes="Bold"
                                   TextColor="White"
                                   HorizontalOptions="Center" />

                            <Label x:Name="CurrentTempLabel"
                                   FontSize="48"
                                   FontAttributes="Bold"
                                   TextColor="White"
                                   HorizontalOptions="Center" />

                            <Label x:Name="ConditionLabel"
                                   FontSize="14"
                                   TextColor="White"
                                   HorizontalOptions="Center" />

                            <Grid ColumnDefinitions="*,*,*" Margin="0,10,0,0">
                                <VerticalStackLayout Grid.Column="0" HorizontalOptions="Center">
                                    <Label Text="ðŸ’§ Nem" FontSize="12" TextColor="#EDE7FF" HorizontalOptions="Center" />
                                    <Label x:Name="HumidityLabel" FontSize="14" TextColor="White" HorizontalOptions="Center" />
                                </VerticalStackLayout>
                                <VerticalStackLayout Grid.Column="1" HorizontalOptions="Center">
                                    <Label Text="ðŸŒ¬ï¸ RÃ¼zgar" FontSize="12" TextColor="#EDE7FF" HorizontalOptions="Center" />
                                    <Label x:Name="WindLabel" FontSize="14" TextColor="White" HorizontalOptions="Center" />
                                </VerticalStackLayout>
                                <VerticalStackLayout Grid.Column="2" HorizontalOptions="Center">
                                    <Label Text="ðŸ§Š Hissedilen" FontSize="12" TextColor="#EDE7FF" HorizontalOptions="Center" />
                                    <Label x:Name="FeelsLikeLabel" FontSize="14" TextColor="White" HorizontalOptions="Center" />
                                </VerticalStackLayout>
                            </Grid>
                        </VerticalStackLayout>
                    </Frame>

                    <!-- Tahmin baÅŸlÄ±ÄŸÄ± -->
                    <Label Text="ðŸ“… 5 GÃ¼nlÃ¼k Tahmin"
                           FontSize="18"
                           FontAttributes="Bold"
                           TextColor="White"
                           Margin="0,4,0,0" />

                    <!-- Tahmin listesi -->
                    <CollectionView x:Name="ForecastCollectionView">
                        <CollectionView.ItemTemplate>
                            <DataTemplate>
                                <Frame Padding="12"
                                       Margin="0,6"
                                       BackgroundColor="#161A22"
                                       BorderColor="#2A3242"
                                       CornerRadius="16"
                                       HasShadow="True">

                                    <Grid ColumnDefinitions="Auto,*,Auto,Auto" ColumnSpacing="12">

                                        <Label Text="{Binding Icon}"
                                               FontSize="28"
                                               VerticalOptions="Center"
                                               Grid.Column="0" />

                                        <VerticalStackLayout Grid.Column="1" VerticalOptions="Center" Spacing="2">
                                            <Label Text="{Binding DayName}"
                                                   FontAttributes="Bold"
                                                   FontSize="14"
                                                   TextColor="White" />
                                            <Label Text="{Binding Date}"
                                                   FontSize="12"
                                                   TextColor="#A7B0C0" />
                                            <Label Text="{Binding Condition}"
                                                   FontSize="11"
                                                   TextColor="#A7B0C0" />
                                        </VerticalStackLayout>

                                        <Label Text="{Binding MaxTemp}"
                                               FontSize="16"
                                               FontAttributes="Bold"
                                               TextColor="White"
                                               VerticalOptions="Center"
                                               Grid.Column="2" />

                                        <Label Text="{Binding MinTemp}"
                                               FontSize="14"
                                               TextColor="#A7B0C0"
                                               VerticalOptions="Center"
                                               Grid.Column="3" />

                                    </Grid>
                                </Frame>
                            </DataTemplate>
                        </CollectionView.ItemTemplate>
                    </CollectionView>

                </VerticalStackLayout>
            </ScrollView>

            <!-- Loading Overlay -->
            <Grid x:Name="LoadingOverlay"
                  IsVisible="False"
                  BackgroundColor="#80000000">
                <VerticalStackLayout VerticalOptions="Center" HorizontalOptions="Center" Spacing="10">
                    <ActivityIndicator IsRunning="True"
                                       Color="White"
                                       HeightRequest="50"
                                       WidthRequest="50" />
                    <Label Text="â³ Hava durumu yÃ¼kleniyor..."
                           TextColor="White"
                           FontSize="14"
                           HorizontalOptions="Center" />
                </VerticalStackLayout>
            </Grid>

        </Grid>

    </Grid>
</ContentPage>
